import { HorizontalBox, VerticalBox, Button } from "std-widgets.slint";
import { Kolory } from "../colors.slint";

export component HistogramWindow inherits Window {
    in-out property <[int]> histogram-red-data: [];
    in-out property <[int]> histogram-green-data: [];
    in-out property <[int]> histogram-blue-data: [];
    in-out property <[int]> histogram-luminance-data: [];
    in-out property <float> histogram-min-value: 0.0;
    in-out property <float> histogram-max-value: 1.0;
    in-out property <int> histogram-total-pixels: 0;
    in-out property <float> histogram-p1: 0.0;
    in-out property <float> histogram-p50: 0.5;
    in-out property <float> histogram-p99: 1.0;
    
    callback exit();
    
    title: "Histogram Analysis";
    width: 800px;
    height: 600px;
    background: Kolory.tlo;
    default-font-family: "Geist";
    
    VerticalBox {
        padding: 16px;
        spacing: 8px;
        
        Text {
            text: "Histogram Analysis";
            font-size: 18px;
            font-weight: 700;
            color: Kolory.tekst;
        }
        
        // Histogram visualization placeholders
        Rectangle {
            height: 200px;
            background: Kolory.panel_tlo;
            border-color: Kolory.linia_podzialu;
            border-width: 1px;
        }
        
        // Statistics
        HorizontalBox {
            spacing: 16px;
            
            VerticalBox {
                Text { text: "Min: " + root.histogram-min-value; color: Kolory.tekst; }
                Text { text: "P1: " + root.histogram-p1; color: Kolory.tekst; }
            }
            
            VerticalBox {
                Text { text: "P50: " + root.histogram-p50; color: Kolory.tekst; }
                Text { text: "P99: " + root.histogram-p99; color: Kolory.tekst; }
            }
            
            VerticalBox {
                Text { text: "Max: " + root.histogram-max-value; color: Kolory.tekst; }
                Text { text: "Pixels: " + root.histogram-total-pixels; color: Kolory.tekst; }
            }
        }
        
        Button {
            text: "Close";
            clicked => { root.exit(); }
        }
    }
}
